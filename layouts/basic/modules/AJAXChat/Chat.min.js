
var AJAXChat_Chat_Js={interval:false,blinkingIcon:function(){clearInterval(this.interval);this.interval=setInterval(function(){$(".headerLinkChat").effect("pulsate",1500)},1500)},stopBlinkingIcon:function(){clearInterval(this.interval);app.cacheClear("unreadCharMessage"+app.getMainParams("current_user_id"))},registerUnreadMessage:function(){this.blinkingIcon();app.cacheSet("unreadCharMessage"+app.getMainParams("current_user_id"),true)},checkUnreadMessage:function(){var a=app.cacheGet("unreadCharMessage"+app.getMainParams("current_user_id"));if(a){this.blinkingIcon()}}};jQuery(function(){var a={view:"Index",module:"AJAXChat"};AppConnector.request(a).then(function(d){jQuery("#page").append(d);var b=$("#AJAXChatBlock");var c=$(".headerLinkChat");AJAXChat_Chat_Js.checkUnreadMessage();c.click(function(){AJAXChat_Chat_Js.stopBlinkingIcon();$(".actionMenu").removeClass("actionMenuOn");if(b.hasClass("chat-closed")){b.addClass("chat-opened").removeClass("chat-closed")}else{b.addClass("chat-closed").removeClass("chat-opened")}});$(document).mouseup(function(f){if(b.hasClass("chat-opened")&&!b.is(f.target)&&!c.is(f.target)&&b.has(f.target).length===0&&c.has(f.target).length===0){b.addClass("chat-closed").removeClass("chat-opened")}})})});